# telemedicine.chat
Module that handle the user chat interaction

---
## Chat
```python
class telemedicine.chat.Chat()
```

The `Chat` class manages chat interactions and retrieves information from documents. It maintains a chat history, processes user questions, and retrieves relevant information based on the context and embeddings.

---
**Attributes:**

- **is_question_complete**: `bool`

    Indicates whether the question is complete.
- **path_vectorstores**: `str`
    
    Path to the vector stores.
- **is_document_found**: `bool`
    
    Indicates whether the document is found.
- **complete_response**: `str`
    
    The complete response.
- **history**: [`List[Message]`](rag-core)
    
    The chat history.
- **initial_question**: `List[str]`
    
    The initial question.
- **additional_details**: `List[str]`
    
    Additional details.
- **document_candidates**: `List[str]`
    
    Document candidates.
- **root_document_path**: `str`
    
    Root document path.
- **openai_key**: `str`
    
    OpenAI API key.

---
**Methods**

```python
add_history(message_type, message, message_embedding=None)
```
Add a message to the chat history.

Parameter:
- message_type (str)

    The type of the message (e.g., 'user', 'assistant').

- message (str)

    The content of the message.

- message_embedding (List[float], optional)
    
    The embedding of the message. Defaults to None.

---
```python
get_last_conversation_index()
```
Get the index of the last conversation in the chat history.

Returns:
- int: The index of the last conversation.
    
---
```python
get_message_pair_by_index(index)
```
Retrieve a pair of messages (user and assistant) by conversation index.

Parameter:
- index (int)

    The conversation index.

Returns:
- Tuple[str, str]: A tuple containing the user message and the assistant message.

---
```python
get_n_last_message_pair(num_messages)
```
Retrieve the last n pairs of messages (user and assistant) from the chat history.

Parameter:
- num_messages (int)

    The number of message pairs to retrieve.

Returns:
- str: A string representation of the last n message pairs.

---
```python
get_conversation()
```
Retrieve the entire conversation history.

Returns:
- List[Dict[str, str]]: A list of dictionaries, each containing the message type, message content, and timestamp.

---
Here's the corrected markdown:

```python
get_relevant_history(question_embedding)
```
Retrieve the most relevant history based on the question embedding.

Parameter:
- question_embedding (List[float])

    The embedding of the current question.

Returns:
- str: The most relevant message pair (user and assistant) from the history.

---
```python
prepare_history(question_embedding=None)
```
Prepare the history to be included in the current context.

Args:
- question_embedding (List[float], optional)

    The embedding of the current question. Defaults to None.

Returns:
- str: A string representation of the relevant history to include.

---
```python
get_response(question)
```
Process the given question and retrieve the appropriate response. This method wraps several interactions with the retriever agent.

Args:
- question (str)

    The question to process and retrieve the response for.

Returns:
- str: The response generated by the retrieval process.

---
```python
prepare_initial_question(question)
```
Prepare the initial question by appending any additional details provided by the user.

Args:
- question (str)

    The initial question or additional details provided by the user.

Returns:
- str: The prepared initial question.

---
```python
get_initial_response(question)
```
Retrieve the initial response for the given question.

Args:
- question (str)

    The question to retrieve the initial response for.

Returns:
- Tuple[str, str]: The status of the response and the response text.

---
```python
get_document_selection(question)
```
Retrieve a list of document candidates for the given question.

Args:
- question (Dict[str, Any])

    The question details including the folder path.

Returns:
- str: The response text for document selection.

---
```python
get_document_confirmation(question)
```
Confirm the document selection for the given question.

Args:
- question (str)

    The question for document confirmation.

Returns:
- Tuple[bool, str]: The status of the document confirmation and the response text.

---
```python
get_final_document_answers(question, question_embedding)
```
Retrieve the final answers from the documents for the given question.

Args:
- question (str)

    The refined question.
    
- question_embedding (List[float])

    The embedding of the question.

Returns:
- str: The final answers from the documents.
    
---
```python
get_ganti_dokumen_response()
```
Reset the document

---
